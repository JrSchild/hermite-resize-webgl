<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>WebGL - 2D Image</title>

  <!-- vertex shader -->
  <script id="2d-vertex-shader" type="x-shader/x-vertex">
    attribute vec2 a_position;
    attribute vec2 a_texCoord;
    uniform vec2 u_resolution;
    varying vec2 v_texCoord;

    void main() {
      vec2 clipSpace = (a_position / u_resolution * 2.0) - 1.0;

      gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

      v_texCoord = a_texCoord;
    }
  </script>

  <!-- fragment shader -->
  <script id="2d-fragment-shader" type="x-shader/x-fragment">
    precision highp float;

    uniform sampler2D u_image;
    uniform vec2 u_srcResolution;
    varying vec2 v_texCoord;

    void main() {
      // I pizelStep is more precise if it's calculated within
      // the shader, rather than passed as uniform-value
      vec2 srcPixelStep = vec2(1) / u_srcResolution;

      // Move everything exactly 30px right:
      vec2 target = v_texCoord + (vec2(30) * srcPixelStep);

      gl_FragColor = texture2D(u_image, target);
    }
  </script>
</head>
<body>
  <script src="/bower/blueimp-canvas-to-blob/js/canvas-to-blob.js"></script>
  <script src="/src/webgl-utils.js"></script>
  <script src="/src/hermite-resize-webgl.js"></script>
  <script>
    function downloadLink(canvas) {
      canvas.toBlob(function (bb) {
        var a = document.createElement('a');
        a.download = 'hamster-cropped.png';
        a.href = window.URL.createObjectURL(bb);
        a.textContent = 'Click here for download';
        document.body.appendChild(a);
      });
    }
  </script>
  <script>
    var glScale = GLScale();

    glScale({
      image: '/hamster.jpg',
      width: 400,
      height: 300
    }, function (canvas) {
      document.body.appendChild(canvas);
      downloadLink(canvas);
    });
  </script>
</body>
</html>